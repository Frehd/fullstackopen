(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(2),i=function(e){var n=e.handleChange,t=e.content,a=e.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:a},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{value:t.name,onChange:n("Name")}),r.a.createElement("br",null),"Number: ",r.a.createElement("input",{value:t.number,onChange:n("Number")})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},l=function(e){var n=e.person,t=e.handleDelete;return r.a.createElement(r.a.Fragment,null,n.name," ",n.number,r.a.createElement("button",{onClick:t(n)},"delete"),r.a.createElement("br",null))},m=function(e){var n=e.phonebook,t=e.searchString,a=e.handleDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numbers"),n.map((function(e){return e.name.toLowerCase().includes(t.toLowerCase())?r.a.createElement(l,{key:e._id,person:e,handleDelete:a}):r.a.createElement(r.a.Fragment,null)})))},s=function(e){var n=e.handleChange,t=e.content;return r.a.createElement(r.a.Fragment,null,"Search: ",r.a.createElement("input",{value:t,onChange:n}))},f=t(3),h=t.n(f),d="/api/persons",b=function(){return h.a.get(d).then((function(e){return e.data}))},v=function(e){return h.a.post(d,e).then((function(e){return e.data}))},p=function(e,n){return h.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return h.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var n=e.message,t=e.positive;return null===n|void 0===n|""===n?null:r.a.createElement("div",{className:t?"positive":"error"},n)},C=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),l=Object(u.a)(o,2),f=l[0],h=l[1],d=Object(a.useState)(""),C=Object(u.a)(d,2),j=C[0],O=C[1],S=Object(a.useState)(""),w=Object(u.a)(S,2),k=w[0],y=w[1],N=Object(a.useState)({message:"",positive:""}),D=Object(u.a)(N,2),_=D[0],F=D[1],J={setName:function(e){h(e)},setNumber:function(e){O(e)}};Object(a.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var L=function(){setTimeout((function(){b().then((function(e){c(e)}))}),500)};return r.a.createElement("div",null,r.a.createElement(E,{message:_.message,positive:_.positive}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{content:k,handleChange:function(e){return y(e.target.value)}}),r.a.createElement(i,{handleChange:function(e){return function(n){J["set".concat(e)](n.target.value)}},content:{name:f,number:j},handleSubmit:function(e){if(e.preventDefault(),0===t.filter((function(e){return e.name===f})).length)v({name:f,number:j}).then((function(){c(t.concat({name:f,number:j})),L(),F({message:"Added ".concat(f),positive:!0}),h(""),O("")})).catch((function(e){F({message:e.response.data.error,positive:!1})}));else if(window.confirm("Do you really want to change ".concat(f,"'s number?"))){var n=t.filter((function(e){return e.name===f}))[0];p(n._id,{name:f,number:j}).then((function(){c(t.map((function(e){return e._id!==n._id?e:{name:f,number:j}}))),L(),F({message:"Changed ".concat(f,"'s number"),positive:!0}),h(""),O("")})).catch(F({message:"Contact ".concat(f," has already been removed from the server"),positive:!1}))}}}),r.a.createElement(m,{phonebook:t,searchString:k,handleDelete:function(e){return function(){window.confirm("Do you really want to delete ".concat(e.name))&&g(e._id).then((function(){c(t.filter((function(n){return n._id!==e._id}))),L(),F({message:"Removed ".concat(e.name),positive:!0})})).catch(F({message:"Contact ".concat(f," has already been removed from the server"),positive:!1}))}}}))};t(36);o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.017fd928.chunk.js.map